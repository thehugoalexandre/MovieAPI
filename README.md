
# Movie API - NestJS Backend Project

![NestJS](https://img.shields.io/badge/nestjs-%23E0234E.svg?style=for-the-badge&logo=nestjs&logoColor=white)
![TypeScript](https://img.shields.io/badge/typescript-%23007ACC.svg?style=for-the-badge&logo=typescript&logoColor=white)
![MySQL](https://img.shields.io/badge/mysql-%2300f.svg?style=for-the-badge&logo=mysql&logoColor=white)

## Description

This is a RESTful API project built with **NestJS** to manage movies and genres. The API allows CRUD operations on movies and genres, as well as performing searches based on titles and genres. Additionally, a JWT-based authentication system has been implemented to secure the endpoints.

## Features

- **JWT Authentication**: User registration, Sign In (login), and endpoint protection with JWT tokens.
- **Movies CRUD**:
  - Add, list, update, and delete movies.
  - Associate genres with movies.
  - Search for movies by title and/or genre.
- **Genres CRUD**:
  - Add, list, and delete genres.
- **Pagination**: Implemented for movie listings.
- **Logging Middleware**: Logs incoming requests, including information about the authenticated user.
- **Swagger Documentation**: Complete API documentation with detailed endpoint descriptions.

## Technologies Used

- **NestJS**: Framework for building scalable Node.js applications.
- **TypeScript**: Programming language used for development.
- **MySQL**: Relational database used.
- **TypeORM**: ORM used for database interactions.
- **JWT (JSON Web Token)**: Secure token-based authentication.
- **Winston**: Logging library for capturing and storing logs.
- **Swagger**: Tool for documenting RESTful APIs.

## Installation

### Prerequisites

- Node.js >= 14
- MySQL
- npm or yarn

### Steps

1. Clone the repository:
   ```bash
   git clone https://github.com/thehugoalexandre/MovieAPI.git
   cd movie-api
   ```

2. Install dependencies:
   ```bash
   npm install
   ```

3. Configure the environment:
   - Create or use the `.env` file at the root of the project

4. Run database migrations:
   ```bash
   npm run typeorm migration:run
   ```

5. Start the server:
   ```bash
   npm run start:dev
   ```

## Usage

### API Documentation (Swagger)

After starting the server, go to `http://localhost:3000/api` to view the API documentation generated by Swagger. This documentation provides clear and objective descriptions for each endpoint.

### Example Requests

1. **Register User**:
   - Method: `POST`
   - Endpoint: `v1/auth/signup`
   - Body:
     ```json
     {
       "name": "Hugo",
       "email": "hugo@example.com",
       "password": "Password@123"
     }
     ```

2. **Authentication (Login)**:
   - Method: `POST`
   - Endpoint: `v1/auth/signin`
   - Body:
     ```json
     {
       "email": "hugo@example.com",
       "password": "Password@123"
     }
     ```

3. **Add Movie**:
   - Method: `POST`
   - Endpoint: `v1/movies`
   - Body:
     ```json
     {
       "title": "Inception",
       "description": "A mind-bending thriller",
       "releaseDate": "2010-07-16",
       "genres": [1, 2]
     }
     ```

### Postman Collection

You can use the following link to import the Postman collection for testing the API endpoints:
[Postman Collection](https://api.postman.com/collections/27646716-6464318d-9b41-4a9d-968a-4e7858b6f08a?access_key=PMAT-01J5BNX6PKNN423QNJ3S8VMQFR)

## Contribution

Contributions are welcome! Please open an issue or submit a pull request to suggest improvements or report bugs.

## License

This project is licensed under the MIT License. See the [LICENSE](./LICENSE) file for more details.
